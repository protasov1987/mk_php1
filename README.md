# Маршрутные карты (PHP/MySQL)

Простое PHP-приложение без внешних зависимостей для ведения маршрутных карт. Подходит для виртуального хостинга (например, Timeweb) и использует MySQL 8.0 через PDO.

## Установка
1. Создайте базу данных и пользователя MySQL.
2. Примените SQL-скрипт `sql/schema.sql`.
3. Настройте подключение к базе в `config.php` через переменные окружения `DB_HOST`, `DB_NAME`, `DB_USER`, `DB_PASS`, `DB_PORT` или задайте значения в файле.
4. Загрузите все файлы в корень сайта (public_html).
5. Перейдите на `/login.php` и авторизуйтесь.

## Автосоздание данных
Если таблица `users` пуста, автоматически добавляются уровни доступа и пользователи:
- Администратор: пароль `admin`, полный доступ.
- Наблюдатель: пароль `viewer`, доступ только к дашборду и без авто-выхода по таймауту.

## Структура
- `login.php` — авторизация по одному паролю.
- `dashboard.php` — дашборд (доступно всем, включая наблюдателя).
- `route_cards_list.php` — список маршрутных карт.
- `route_card_edit.php` — создание/редактирование карты и операций.
- `route_card_view.php` — просмотр/управление статусами операций, печать.
- `tracker.php` — трекер операций с кнопками старт/пауза/продолжить/завершить и учётом времени выполнения.
- `users.php` — управление пользователями и паролями (только для администратора).
- `access_levels.php` — управление уровнями доступа и правами (только для администратора).
- `config.php`, `header.php`, `footer.php` — общие настройки, шаблоны и функции доступа.

## Особенности
- Авторизация по первому паролю или EAN-13-паролю (оба хранятся в хэшированном виде; второй пароль также хранится в открытом виде для печати).
- Проверка уникальности паролей по всем пользователям.
- Автовыход через 5 минут бездействия для всех, кроме наблюдателя.
- В меню отображаются только разрешённые разделы согласно уровню доступа.
